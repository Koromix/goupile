[libmicrohttpd]
Type = ExternalLibrary
SourceDirectory = vendor/libmicrohttpd/src/microhttpd
SourceIgnore = connection_https.c test_*.c
IncludeDirectory = vendor/libmicrohttpd
IncludeDirectory = vendor/libmicrohttpd/src/include
Link_Win32 = ws2_32

[libsodium]
Type = ExternalLibrary
SourceDirectoryRec = vendor/libsodium/src/libsodium
IncludeDirectory = vendor/libsodium/src/libsodium/include
IncludeDirectory = vendor/libsodium/src/libsodium/include/sodium
Definitions = SODIUM_STATIC
Definitions_POSIX = HAVE_PTHREAD

[sqlite]
Type = ExternalLibrary
SourceFile = vendor/sqlite/sqlite3.c
Definitions = SQLITE_THREADSAFE=1 SQLITE_ENABLE_JSON1

[libcc]
Type = Library
SourceDirectory = src/libcc
SourceDirectory = vendor/miniz
Link_Win32 = shlwapi
Precompile_CXX = src/libcc/libcc.hh

[felix]
Type = Executable
SourceDirectory = src/felix/felix
ImportFrom = libcc
Precompile_CXX = src/libcc/libcc.hh

[goupil]
Type = Executable
SourceDirectory = src/goupil/server
SourceDirectory = src/felix/libpack
SourceFile = src/wrappers/http.cc
AssetFile = vendor/ace/ace.js
AssetFile = vendor/ace/mode-javascript.js
AssetFile = vendor/ace/theme-monokai.js
AssetFile = vendor/ace/worker-javascript.js
AssetFile = vendor/lit-html/lit-html.min.js
AssetFile = src/goupil/client/util.js
AssetFile = src/goupil/client/goupil.js
AssetFile = src/goupil/client/autoform.js
AssetFile = src/goupil/client/schedule.js
AssetFile = src/goupil/client/goupil.css
AssetFile = src/goupil/client/autoform.css
AssetFile = src/goupil/client/schedule.css
AssetFile = src/goupil/client/goupil.html
AssetIgnore = *.ini
AssetOptions = -cGzip -M src/goupil/client/packer.ini
AssetLink = ModuleIfDebug
ImportFrom = libcc libmicrohttpd libsodium sqlite
Definitions = SODIUM_STATIC
Precompile_CXX = src/libcc/libcc.hh

[goupil_admin]
Type = Executable
SourceDirectory = src/goupil/admin
SourceFile = src/goupil/server/data_sqlite.cc
ImportFrom = libcc sqlite
Precompile_CXX = src/libcc/libcc.hh

