[libmicrohttpd]
Type = ExternalLibrary
SourceDirectory = vendor/libmicrohttpd/src/microhttpd
SourceIgnore = connection_https.c test_*.c
IncludeDirectory = vendor/libmicrohttpd
IncludeDirectory = vendor/libmicrohttpd/src/include
Link_Win32 = ws2_32

[libsodium]
Type = ExternalLibrary
SourceDirectoryRec = vendor/libsodium/src/libsodium
IncludeDirectory = vendor/libsodium/src/libsodium/include
IncludeDirectory = vendor/libsodium/src/libsodium/include/sodium
Definitions = SODIUM_STATIC
Definitions_POSIX = HAVE_PTHREAD
ExportDefinitions = SODIUM_STATIC

[sqlite]
Type = ExternalLibrary
SourceFile = vendor/sqlite/sqlite3.c
Definitions = SQLITE_THREADSAFE=1 SQLITE_ENABLE_JSON1 SQLITE_DQS=0

[quickjs]
Type = ExternalLibrary
SourceFile = vendor/quickjs/quickjs.c
SourceFile = vendor/quickjs/cutils.c
SourceFile = vendor/quickjs/libbf.c
SourceFile = vendor/quickjs/libunicode.c
SourceFile = vendor/quickjs/libregexp.c
Definitions = QUICKJS_VERSION=\"2020-09-06\" CONFIG_BIGNUM JS_STRICT_NAN_BOXING
ExportDefinitions = JS_STRICT_NAN_BOXING

[libcc]
Type = Library
SourceDirectory = src/core/libcc
SourceDirectory = vendor/miniz
PrecompileCXX = src/core/libcc/libcc.hh

[libhttp]
Type = Library
SourceDirectory = src/web/libhttp
SourceIgnore = libhttp.cc
ImportFrom = libcc libmicrohttpd libsodium
PrecompileCXX = src/core/libcc/libcc.hh

[felix]
Type = Executable
SourceDirectory = src/felix
SourceFile = src/core/libwrap/json.cc
ImportFrom = libcc
PrecompileCXX = src/core/libcc/libcc.hh

[goupile]
Type = Executable
SourceDirectory = src/goupile/server
SourceFile = src/core/libwrap/json.cc
SourceFile = src/core/libwrap/sqlite.cc
AssetFile = vendor/ace/src/ace.js
AssetFile = vendor/ace/src/mode-css.js
AssetFile = vendor/ace/src/mode-html.js
AssetFile = vendor/ace/src/mode-javascript.js
AssetFile = vendor/ace/src/theme-merbivore_soft.js
AssetFile = vendor/ace/src/ext-searchbox.js
AssetFile = vendor/lit-html/lit-html.min.js
AssetFile = vendor/chartjs/chart.bundle.min.js
AssetFile = vendor/sheetjs/xlsx.core.min.js
AssetFile = vendor/sha256/sha256.js
AssetFile = src/goupile/server/ports.js
AssetDirectory = vendor/docxtemplater
AssetDirectory = src/web/libjs
AssetDirectory = vendor/opensans
AssetDirectoryRec = src/goupile/client
AssetIgnore = LICENSE.txt *.xcf
AssetOptions = -cGzip -M src/goupile/server/packer.ini
ImportFrom = libcc libhttp libsodium sqlite quickjs
PrecompileCXX = src/core/libcc/libcc.hh

[goupile_admin]
Type = Executable
SourceDirectory = src/goupile/admin
SourceFile = src/goupile/server/config.cc
SourceFile = src/goupile/server/data.cc
SourceFile = src/core/libwrap/sqlite.cc
AssetDirectoryRec = src/goupile/admin/files
AssetOptions = -cGzip -s4
ImportFrom = libcc sqlite libsodium
PrecompileCXX = src/core/libcc/libcc.hh

